<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32-WiFi-DMX-Controller</title>
  <style>
    body { background: #ccff66; font-family: sans-serif; display: flex; flex-direction: row; padding: 20px; }
    .panel { border: 2px solid white; border-radius: 12px; padding: 10px 20px; margin: 10px; background: #eeffcc; }
    .panel h2 { margin-top: 0; }
    input[type="text"], input[type="number"] { width: 100%; margin-bottom: 8px; }
    button { padding: 6px 12px; margin: 5px; }
    .switch { display: flex; align-items: center; gap: 10px; }
  </style>
</head>
<body>
  <div class="panel">
    <h2>Settings</h2>
    <input id="ssid" placeholder="ssid" type="text"><br>
    <input id="password" placeholder="password" type="text"><br>
    <input id="universe" placeholder="universe" type="number"><br>
    <input id="code" placeholder="update code" type="text"><br>
    <button onclick="restart()">Restart</button>
    <button onclick="saveSettings()">Save</button>
  </div>

  <div class="panel">
    <h2>Web Control</h2>
    <div class="switch">
      <label for="webSwitch">Web Controll</label>
      <input type="checkbox" id="webSwitch" onchange="toggleWeb()">
    </div>
  </div>

  <script>
    function restart() {
      fetch("/restart", { method: "POST" });
    }

    function saveSettings() {
      const formData = new FormData();
      formData.append("ssid", document.getElementById("ssid").value);
      formData.append("password", document.getElementById("password").value);
      formData.append("universe", document.getElementById("universe").value);
      formData.append("code", document.getElementById("code").value);
      fetch("/save_settings", { method: "POST", body: formData })
        .then(r => r.text()).then(text => {
          alert(text);
        });
    }

    function toggleWeb() {
      fetch("/toggle_web", { method: "POST" })
        .then(r => r.text()).then(state => {
          alert("Web control: " + state);
        });
    }
  </script>
</body>
</html>
